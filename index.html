<!DOCTYPE html>
<html>

  <head>
    <meta charset='utf-8'>
    <meta http-equiv="X-UA-Compatible" content="chrome=1">
    <meta name="description" content="erln8 : A sneaky Erlang version manager">

    <link rel="stylesheet" type="text/css" media="screen" href="stylesheets/stylesheet.css">

    <title>erln8</title>
  </head>

  <body>

    <!-- HEADER -->
    <div id="header_wrap" class="outer">
        <header class="inner">
          <a id="forkme_banner" href="https://github.com/metadave/erln8">View on GitHub</a>

          <h1 id="project_title">erln8</h1>
          <h2 id="project_tagline">A sneaky Erlang version manager</h2>

            <section id="downloads">
              <a class="zip_download_link" href="https://github.com/metadave/erln8/zipball/master">Download this project as a .zip file</a>
              <a class="tar_download_link" href="https://github.com/metadave/erln8/tarball/master">Download this project as a tar.gz file</a>
            </section>
        </header>
    </div>

    <!-- MAIN CONTENT -->
    <div id="main_content_wrap" class="outer">
      <section id="main_content" class="inner">
        <h1>
<a id="erln8---an-erlang-version-manager" class="anchor" href="#erln8---an-erlang-version-manager" aria-hidden="true"><span class="octicon octicon-link"></span></a>erln8 - an Erlang version manager</h1>

<h2>
<a id="status" class="anchor" href="#status" aria-hidden="true"><span class="octicon octicon-link"></span></a>Status</h2>

<p>The current version of erln8 is stable, and has been serving me (us?) well for the past year+. However, I'm in the process of rewriting it (April/May 2015) from scratch to make maintainability easier in the future. I'm also adding support for rebar/rebar3 versioning. Are there any other tools you'd like to be able to version w/ erln8?
Ping me if you'd like to help.</p>

<h2>
<a id="what-is-it" class="anchor" href="#what-is-it" aria-hidden="true"><span class="octicon octicon-link"></span></a>What is it?</h2>

<p>erln8 (erl-in-ate) allows you to compile and manage multiple versions of Erlang from source. Instead of downloading individual source packages, it downloads the Github OTP mirror so you are essentially downloading all available versions at once.  Additionaly, you can add your own git repos to support custom OTP patches etc.</p>

<p>The cool thing about erln8 is that you only need to add it to your PATH to use it. No funny environment tweaking ;-) It works by reading an <code>erln8.config</code> config file out of the <strong><em>current directory</em></strong>, or by <strong><em>searching up the directory tree until it finds one.</em></strong> This allows you to "set a version of Erlang to use for a project and forget it".</p>

<h2>
<a id="what-erln8-isnt" class="anchor" href="#what-erln8-isnt" aria-hidden="true"><span class="octicon octicon-link"></span></a>What erln8 isn't</h2>

<p>erln8 does not manage Erlang build dependencies. If you are using erln8, I'm assuming you are already capable enough to figure these out on your own. </p>

<h2>
<a id="installation" class="anchor" href="#installation" aria-hidden="true"><span class="octicon octicon-link"></span></a>Installation</h2>

<p><strong><em>NOTE:</em></strong> erln8 version 0.9.0 breaks backwards compatibility. You'll need to <code>rm -rf ~/.erln8.d</code> and reinitialize erln8.</p>

<h3>
<a id="osx" class="anchor" href="#osx" aria-hidden="true"><span class="octicon octicon-link"></span></a>OSX</h3>

<pre><code>brew install https://raw.github.com/metadave/homebrew/erln8/Library/Formula/erln8.rb
 ## this will install the glib dependency if not already installed
</code></pre>

<p>See the Building section below to continue.</p>

<h3>
<a id="ubuntu" class="anchor" href="#ubuntu" aria-hidden="true"><span class="octicon octicon-link"></span></a>Ubuntu</h3>

<p>(Erlang + <em>general</em> erln8 deps)</p>

<pre><code>sudo apt-get install build-essential libncurses5-dev openssl libssl-dev fop xsltproc unixodbc-dev libglib2.0-dev git autoconf
</code></pre>

<p>See the Building section below to continue.</p>

<h3>
<a id="fedora" class="anchor" href="#fedora" aria-hidden="true"><span class="octicon octicon-link"></span></a>Fedora</h3>

<p>(Erlang + <em>general</em> erln8 deps)</p>

<pre><code>sudo yum install gcc glibc-devel make ncurses-devel openssl-devel autoconf glib2-devel.x86_64 git
</code></pre>

<p>this can be helpful as well:</p>

<pre><code>yum groupinstall "Development tools"
</code></pre>

<p>See the Building section below to continue.</p>

<h3>
<a id="freebsd" class="anchor" href="#freebsd" aria-hidden="true"><span class="octicon octicon-link"></span></a>FreeBSD</h3>

<p><a href="https://www.freebsd.org/doc/handbook/ports-using.html">Install</a> the <code>glib20</code> port:</p>

<pre><code># as root
cd /usr/ports/devel/glib20
make install
</code></pre>

<p>Install additional dependencies:</p>

<pre><code>pkg install git-2.3.0
pkg install autoconf-2.69
pkg install gmake
</code></pre>

<p>Use <code>gmake</code> instead of <code>make</code>:</p>

<pre><code>export MAKE_BIN=gmake
</code></pre>

<p><strong><em>NOTE</em></strong> to install erln8 on FreeBSD, you'll need to run:</p>

<pre><code>sudo gmake install
</code></pre>

<p>See the Building section below to continue.</p>

<h3>
<a id="arch" class="anchor" href="#arch" aria-hidden="true"><span class="octicon octicon-link"></span></a>Arch</h3>

<p>Install erln8 from AUR:</p>

<pre><code>yaourt erln8
</code></pre>

<p>Or grab the package tarball/PKGBUILD from: <a href="https://aur.archlinux.org/packages/erln8/">https://aur.archlinux.org/packages/erln8/</a></p>

<p>The PKBUILD repo lives at <a href="https://github.com/aerosol/erln8-aur">https://github.com/aerosol/erln8-aur</a></p>

<h3>
<a id="building" class="anchor" href="#building" aria-hidden="true"><span class="octicon octicon-link"></span></a>Building</h3>

<pre><code> # remove Erlang from your path!!

git clone https://github.com/metadave/erln8.git
cd erln8
make
sudo make install
 # NOTE: on FreeBSD, you MUST use
 #   sudo gmake install

 # the default location is /usr/local/bin/erln8
 # OR
sudo make PREFIX=/opt install
</code></pre>

<h3>
<a id="running-the-tests-optional" class="anchor" href="#running-the-tests-optional" aria-hidden="true"><span class="octicon octicon-link"></span></a>Running the tests (Optional)</h3>

<p>Running the tests requires Ruby 1.9.3 + iniparse (which is installed via <code>bundle install</code>).</p>

<pre><code>cd test
bundle install
make
</code></pre>

<h3>
<a id="uninstall" class="anchor" href="#uninstall" aria-hidden="true"><span class="octicon octicon-link"></span></a>Uninstall</h3>

<pre><code>cd erln8
sudo make uninstall
</code></pre>

<h2>
<a id="dependencies" class="anchor" href="#dependencies" aria-hidden="true"><span class="octicon octicon-link"></span></a>Dependencies</h2>

<ul>
<li>git</li>
<li>glib-2.0 </li>
<li>gio-2.0</li>
</ul>

<h2>
<a id="quickstart" class="anchor" href="#quickstart" aria-hidden="true"><span class="octicon octicon-link"></span></a>Quickstart</h2>

<p>To create erln8 config files, clone the default OTP repo, and build the latest version of Erlang (OTP-17.0.1 as of writing), simply run:</p>

<pre><code>erln8 --quickstart
</code></pre>

<p>Depending on your system, it could take quite awhile to download the OTP Git repository and build Erlang. It might be a nice time to get a beer/coffee/tea/Tab. </p>

<p><strong>Note</strong>: there aren't any options passed to the <code>configure</code> script during build when  --quickstart is used. On OSX, this defaults to a measly 32-bits install.</p>

<p>Once the quickstart completes, you'll still need to cd to a directory where you want to use Erlang and run:</p>

<pre><code>erln8 --use quickstart_build
</code></pre>

<p>The quickstart will fail Erlang build dependencies aren't installed or correct. Once you have the required dependencies installed, you can continue the build with the following:</p>

<pre><code>erln8 --build --tag OTP_R16B02 --id R16B02
</code></pre>

<h2>
<a id="initial-setup" class="anchor" href="#initial-setup" aria-hidden="true"><span class="octicon octicon-link"></span></a>Initial setup</h2>

<p><strong><em>If you haven't added the erln8 directory to your path, do it now. If you already have Erlang in your path, REMOVE IT!</em></strong></p>

<p>Run this once, it creates <code>~/.erln8.d</code> and <code>~/.erln8.d/config</code></p>

<pre><code>erln8 --init
</code></pre>

<p>Next, you'll need to clone the OTP source repo from Github if you don't have Erlang installed. This default repo is cloned to <code>~/.erln8.d/repos/default</code>.</p>

<pre><code>erln8 --clone default
</code></pre>

<p>To see a list of versions you can build, run:</p>

<pre><code>erln8 --buildable
</code></pre>

<p>or</p>

<pre><code>erln8 --buildable --repo default
</code></pre>

<p>replacing <code>default</code> with whatever erln8-configured Git repo you want to use.</p>

<p>If you already have Erlang installed, skip down to Linking an Existing Erlang below.</p>

<p>The following command will build Erlang R16B02 using the <code>OTP_R16B02</code> tag from Git. This build can now be referred to by the --id value (see the erln8 --use example below). Also, see the ~/.erln8.d/config file for specific configs or add your own, or run erln8 --configs.</p>

<pre><code>  erln8 --build --tag OTP_R16B02 --id r16b02 --config osx_llvm
  erln8 --build --tag OTP_R15B01 --id r15b01 --config osx_llvm
</code></pre>

<p>You can specify alternate Git repos to build from. <code>erln8 --repos</code> lists available repos or look in ~/.erln8.d/config</p>

<pre><code>  erln8 --build --repo basho --tag OTP_R15B01 --id r15b01p --config osx_llvm
</code></pre>

<h3>
<a id="using-gmake-instead-of-make" class="anchor" href="#using-gmake-instead-of-make" aria-hidden="true"><span class="octicon octicon-link"></span></a>Using gmake instead of make</h3>

<p>If your platform requires the use of <code>gmake</code> instead of <code>make</code>, erln8 will
honor the <code>MAKE_BIN</code> environment variable.</p>

<pre><code>export MAKE_BIN=gmake
or
setenv MAKE_BIN gmake
// depending on the shell you use
</code></pre>

<h2>
<a id="linking-an-existing-version-erlang" class="anchor" href="#linking-an-existing-version-erlang" aria-hidden="true"><span class="octicon octicon-link"></span></a>Linking an existing version Erlang</h2>

<p>If you already have a version of Erlang build at an alternate location, you can <em>link</em> erlang to it.</p>

<p>For example, I have an old copy of Erlang R14B04 located in <code>/Users/dparfitt/erlang_R14B04</code>, and I'd like to reference it by the ID <code>R14B04</code>:</p>

<pre><code>erln8 --link /Users/dparfitt/erlang_R14B04 --id R14B04
</code></pre>

<p>You'll be able to run <code>erln8 --list</code> and see the linked version:</p>

<pre><code>R16B02b3:slag:~$ erln8 --list
R16B02b3 -&gt; /Users/dparfitt/.erln8.d/otps/R16B02b3
R16B02 -&gt; /Users/dparfitt/.erln8.d/otps/R16B02
R14B04 -&gt; /Users/dparfitt/.erln8.d/otps/R14B04
</code></pre>

<p>If I want to <em>unlink</em> this version of Erlang:
version of Erlang:</p>

<p><strong>NOTE:</strong> This does <strong><em>NOTE</em></strong> remove the Erlang directory that erln8 has linked to.</p>

<pre><code>erln8 --unlink --id R14B04
</code></pre>

<p>at which point, R14B04 won't show up as a version of Erlang to use.</p>

<pre><code>R16B02b3:slag:~$ erln8 --list
R16B02b3 -&gt; /Users/dparfitt/.erln8.d/otps/R16B02b3
R16B02 -&gt; /Users/dparfitt/.erln8.d/otps/R16B02
</code></pre>

<h2>
<a id="usage" class="anchor" href="#usage" aria-hidden="true"><span class="octicon octicon-link"></span></a>Usage</h2>

<p>To see which versions of Erlang are available for use from erln8, run:</p>

<pre><code>  erln8 --list
</code></pre>

<p>For any directory that has an Erlang project, you can run erln8 with the <code>--use</code>option to <em>mark that directory and all subdirectories to use a specific version of Erlang WHENEVER YOU CD INTO THAT DIRECTORY.</em></p>

<pre><code> erln8 --use r16b02
</code></pre>

<p>If you need to change the version of Erlang that's already been configured for the current directory:</p>

<pre><code> erln8 --use r16b01 --force
</code></pre>

<p>If you want to find out which version of Erlang the cwd is using, </p>

<pre><code>erln8 --show
</code></pre>

<p>This command simply creates an <code>erln8.config</code> file in the cwd. You can even edit it by hand to specify the configured version of Erlang by <strong>id</strong>, or just rerun <code>erln8 --use some_other_version</code> to change the value.</p>

<pre><code>[0]:prime:~$ cat erln8.config
[Config]
Erlang=r16b02
</code></pre>

<h3>
<a id="all-commands" class="anchor" href="#all-commands" aria-hidden="true"><span class="octicon octicon-link"></span></a>All Commands</h3>

<table>
<thead>
<tr>
<th align="left">Command</th>
<th align="left">Description</th>
</tr>
</thead>
<tbody>
<tr>
<td align="left"><code>--init</code></td>
<td align="left">Initialize erln8</td>
</tr>
<tr>
<td align="left"><code>--use=id</code></td>
<td align="left">Set up the current directory to use a specific version of Erlang, where <code>id</code> is a version name along the lines of <code>r15b02</code> (or whatever you wish to name a distribution)</td>
</tr>
<tr>
<td align="left"><code>--list</code></td>
<td align="left">List available Erlang installations</td>
</tr>
<tr>
<td align="left"><code>--clone=repo</code></td>
<td align="left">Clone an Erlang source repository, where <code>repo</code> is the URL</td>
</tr>
<tr>
<td align="left"><code>--fetch=repo</code></td>
<td align="left">Update source repositories, where <code>repo</code> is the URL</td>
</tr>
<tr>
<td align="left"><code>--build</code></td>
<td align="left">Build a specific version of OTP from source (see more information in <strong>Quickstart</strong> above)</td>
</tr>
<tr>
<td align="left"><code>--repo=repo</code></td>
<td align="left">Specify a repo name to build from</td>
</tr>
<tr>
<td align="left"><code>--tag=git_tag</code></td>
<td align="left">Specify a repo branch/tag to build from</td>
</tr>
<tr>
<td align="left"><code>--id=id</code></td>
<td align="left">A user-assigned name for a version of Erlang (used in conjunction with <code>--build</code> and other commands)</td>
</tr>
<tr>
<td align="left"><code>--config=config</code></td>
<td align="left">Specify a build configuration (<code>default</code>, <code>osx_llvm</code>, <code>osx_gcc_env</code>, or <code>osx_gcc</code>)</td>
</tr>
<tr>
<td align="left"><code>--show</code></td>
<td align="left">Show the configured version of Erlang in the current working directory</td>
</tr>
<tr>
<td align="left"><code>--prompt</code></td>
<td align="left">Display the version of Erlang configured for this part of the directory tree</td>
</tr>
<tr>
<td align="left"><code>--configs</code></td>
<td align="left">List the currently available build configurations</td>
</tr>
<tr>
<td align="left"><code>--repos</code></td>
<td align="left">List build repos</td>
</tr>
<tr>
<td align="left"><code>--link</code></td>
<td align="left">Link a non-erln8 build of Erlang to erln8</td>
</tr>
<tr>
<td align="left"><code>--unlink</code></td>
<td align="left">Unlink a non-erln8 build of Erlang from erln8</td>
</tr>
<tr>
<td align="left"><code>--force</code></td>
<td align="left">Use the force</td>
</tr>
<tr>
<td align="left"><code>--no-color</code></td>
<td align="left">Turn off color output</td>
</tr>
<tr>
<td align="left"><code>--buildable</code></td>
<td align="left">List tags to build from configured source repos</td>
</tr>
<tr>
<td align="left"><code>--quickstart</code></td>
<td align="left">Initialize erln8 and build the latest version of Erlang</td>
</tr>
<tr>
<td align="left"><code>--debug</code></td>
<td align="left">Debug erln8</td>
</tr>
</tbody>
</table>

<h2>
<a id="shell-completion" class="anchor" href="#shell-completion" aria-hidden="true"><span class="octicon octicon-link"></span></a>Shell Completion</h2>

<p>erln8 provides shell completion for commands, available Erlang installations, and buildable Erlang installation. </p>

<pre><code>source ~/path_to_erln8/bash_completion/erln8
</code></pre>

<p>If you installed on OSX via Brew (above), bash_completion is installed automatically for you. </p>

<h2>
<a id="using-erln8-outside-of-home" class="anchor" href="#using-erln8-outside-of-home" aria-hidden="true"><span class="octicon octicon-link"></span></a>Using erln8 outside of $HOME</h2>

<p>A section titled <code>SystemRoots</code> can be created and maintained inside of <code>~/.erln8.d/config</code> to specify versions of Erlang to use outside of $HOME. This can be useful if you don't have write access to these directories.</p>

<pre><code>[SystemRoots]
/opt/foo=R16B01
/tmp=R15B01p
</code></pre>

<p><em>NOTE</em>: a SystemRoot setting will NOT follow symlinks. On OSX, /tmp (among other paths) is actually a symlink to /private/tmp. Thanks Apple!</p>

<h2>
<a id="setting-up-a-default-version-to-use" class="anchor" href="#setting-up-a-default-version-to-use" aria-hidden="true"><span class="octicon octicon-link"></span></a>Setting up a default version to use</h2>

<h3>
<a id="a-if-you-wont-be-using-erlang-outside-of-home" class="anchor" href="#a-if-you-wont-be-using-erlang-outside-of-home" aria-hidden="true"><span class="octicon octicon-link"></span></a>a) if you won't be using Erlang outside of $HOME</h3>

<p>Simply run <code>erln8</code> from your home directory with a version of Erlang that you'd like to use elsewhere. </p>

<p><strong>NOTE</strong>: if you are building/running Erlang source from outside of your home directory, you'll need to run erln8 at a location higher up the directory tree.</p>

<h3>
<a id="b-specifying-a-system-wide-default" class="anchor" href="#b-specifying-a-system-wide-default" aria-hidden="true"><span class="octicon octicon-link"></span></a>b) specifying a system wide default</h3>

<p>you can specify a system default in <code>~/.erln8.d/config</code>:</p>

<pre><code>[Erln8]
system_default=R16B02
</code></pre>

<p>Note, the ID that is specified (R16B02 in this example) must have already been built or linked to erln8.</p>

<h2>
<a id="keeping-your-source-repos-up-to-date" class="anchor" href="#keeping-your-source-repos-up-to-date" aria-hidden="true"><span class="octicon octicon-link"></span></a>Keeping your source repos up-to-date</h2>

<p>To get the latest OTP tags/branchs, you'll need to issue a fetch:</p>

<pre><code>erln8 --fetch default
</code></pre>

<p>where <code>default</code> is the repo name. If you have multiple repositories configured, you'll need to issue fetch once per repo.</p>

<h2>
<a id="customizing-your-shell-prompt" class="anchor" href="#customizing-your-shell-prompt" aria-hidden="true"><span class="octicon octicon-link"></span></a>Customizing your shell prompt</h2>

<ul>
<li>Don't customize your prompt until you have erln8 fully installed.</li>
</ul>

<p>The <code>--prompt</code> parameter displays the configured version of Erlang for the current working directory. </p>

<pre><code>erln8 --prompt
</code></pre>

<p>For example, if you are using <em>bash</em>, you could add the following snippet to your <code>.bash_profile</code>:</p>

<pre><code>function erl_version() {
  erln8 --prompt
}

 # note, this also displays git info for the cwd
PS1='\[$(tput bold)\]\[$(tput setaf 2)\]$(erl_version)\[$(tput sgr0)\]:\[\e[0;36m\]$(__git_ps1 "[%s]")\[\e[m\]\[$(tput setaf 3)\]\h\[$(tput sgr0)\]:\w\$ '; [[ $EUID == 0 ]] &amp;&amp;
PS1='\[$(tput bold)\]\[$(tput setaf 2)\]$(erl_version)\[$(tput sgr0)\]:\[\e[0;36m\]$(__git_ps1 "[%s]")\[\e[m\]\[$(tput setaf 3)\]\h\[$(tput sgr0)\]:\w\$ '

</code></pre>

<p><img src="https://www.evernote.com/shard/s55/sh/937bb22f-ac98-455b-8e6f-8367caf6fdea/0cd1beba8166544470fef351cb614c7e/deep/0/Shell.png" alt="foo"></p>

<h2>
<a id="specifying-a-build-config" class="anchor" href="#specifying-a-build-config" aria-hidden="true"><span class="octicon octicon-link"></span></a>Specifying a build config</h2>

<p>erln8 allows you to pass arbitrary flags to the <code>configure</code> script as part of a <strong>config</strong>. To add a config, edit <code>~/.erln8.d/config</code> and append a <strong><em>name=configstring</em></strong> to the <code>[Configs]</code> section.</p>

<h5>
<a id="example" class="anchor" href="#example" aria-hidden="true"><span class="octicon octicon-link"></span></a><em>Example:</em>
</h5>

<pre><code>[Configs]
osx_llvm=--disable-hipe --enable-smp-support --enable-threads --enable-kernel-poll --enable-darwin-64bit
</code></pre>

<p>To specify environment variables to be used during a build, create a config <strong><em>name=configstring</em></strong> as show above, as well as an additional <strong><em>name_env=vars</em></strong> setting. Any config that has an accompanying *</p>

<h5>
<a id="example-1" class="anchor" href="#example-1" aria-hidden="true"><span class="octicon octicon-link"></span></a><em>Example:</em>
</h5>

<pre><code>[Configs]
osx_gcc=--disable-hipe --enable-smp-support --enable-threads --enable-kernel-poll --enable-darwin-64bit
osx_gcc_env=CC=gcc-4.2 CPPFLAGS='-DNDEBUG' MAKEFLAGS='-j 3'
</code></pre>

<h2>
<a id="specifying-a-default-build-config" class="anchor" href="#specifying-a-default-build-config" aria-hidden="true"><span class="octicon octicon-link"></span></a>Specifying a <em>default</em> build config</h2>

<p>If <code>--config</code> isn't specified as a parameter to a <code>--build</code>, erln8 will use the <code>default_config</code> config variable specified in the <code>Erln8</code> section of <code>~/.erln8.d/config</code>. This is simply the name of a config as configured above.</p>

<pre><code>[Erln8]
default_config=default
</code></pre>

<p>For example, if <code>--config</code> isn't specified as a parameter to a <code>--build</code>, the config <code>osx_llvm</code> will be used:</p>

<pre><code>[Erln8]
default_config=osx_llvm
</code></pre>

<h2>
<a id="erln8-config-file-format" class="anchor" href="#erln8-config-file-format" aria-hidden="true"><span class="octicon octicon-link"></span></a>erln8 config file format</h2>

<ul>
<li>comments begin with the <code>#</code> character and may appear anywhere in the file</li>
<li>all keys and values are <strong>case sensitive</strong>
</li>
</ul>

<h4>
<a id="see-also" class="anchor" href="#see-also" aria-hidden="true"><span class="octicon octicon-link"></span></a>See also:</h4>

<ol>
<li><a href="https://developer.gnome.org/glib/2.38/glib-Key-value-file-parser.html">https://developer.gnome.org/glib/2.38/glib-Key-value-file-parser.html</a></li>
<li><a href="http://freedesktop.org/wiki/Specifications/desktop-entry-spec/">http://freedesktop.org/wiki/Specifications/desktop-entry-spec/</a></li>
</ol>

<h2>
<a id="disabling-color-andor-the-erln8-startup-banner" class="anchor" href="#disabling-color-andor-the-erln8-startup-banner" aria-hidden="true"><span class="octicon octicon-link"></span></a>Disabling color and/or the erln8 startup banner</h2>

<p>To disable the erln8 startup banner, change the appropriate config settings located in the <code>[Erln8]</code> section of <code>~/.erln8.d/config</code>. Boolean values are either <code>true</code> or <code>false</code>, and are case sensitive.</p>

<ul>
<li>
<p><strong>banner</strong></p>

<ul>
<li>Show the version of Erlang that erln8 is running upon startup</li>
<li>
<code>true</code> or <code>false</code>
</li>
</ul>
</li>
<li>
<p><strong>color</strong></p>

<ul>
<li>
<code>true</code> or <code>false</code>
</li>
</ul>
</li>
</ul>

<h4>
<a id="example-2" class="anchor" href="#example-2" aria-hidden="true"><span class="octicon octicon-link"></span></a>Example:</h4>

<pre><code>[Erln8]
banner=false
color=false
</code></pre>

<h2>
<a id="how-does-it-work-under-the-hoodbonnet" class="anchor" href="#how-does-it-work-under-the-hoodbonnet" aria-hidden="true"><span class="octicon octicon-link"></span></a>How does it work under the hood/bonnet?</h2>

<p>When erln8 is compiled, a single binary named <code>erln8</code> is built and installed by default to <code>/usr/local/bin</code>. Additionally, symbolic links to all the Erlang commands in a typical distribution are created <em>but linked to the single <code>erln8</code> binary</em> and are placed in <code>/usr/local/bin</code>. Thus, you have something like this:</p>

<pre><code>$ ls -latr
-rwxr-xr-x    1 root      admin    36256 Dec 27 17:51 erln8
lrwxr-xr-x    1 root      admin       20 Dec 27 17:51 erlexec -&gt; /usr/local/bin/erln8
lrwxr-xr-x    1 root      admin       20 Dec 27 17:51 erlc -&gt; /usr/local/bin/erln8
lrwxr-xr-x    1 root      admin       20 Dec 27 17:51 erl_call -&gt; /usr/local/bin/erln8
lrwxr-xr-x    1 root      admin       20 Dec 27 17:51 erl.src -&gt; /usr/local/bin/erln8
lrwxr-xr-x    1 root      admin       20 Dec 27 17:51 erl -&gt; /usr/local/bin/erln8
lrwxr-xr-x    1 root      admin       20 Dec 27 17:51 epmd -&gt; /usr/local/bin/erln8
…
</code></pre>

<p>In this setup, whenever you call an Erlang command, you are really calling the <code>erln8</code> command.</p>

<p>When <code>erln8</code> starts, it checks <code>argv[0]</code> to see if it was called via a symlink (one of the erl, erlc, dialyzer, etc commands). If it was, it searches the current working directory for an <code>erln8.config</code> file. If one isn't found, it cd's up a directory and looks for an <code>erln8.config</code> file again. This continues until either an <code>erln8.config</code> file is found or the search reaches <code>/</code>. If an <code>erln8.config</code> file hasn't been found and <code>/</code> has been reached, the user hasn't configured a version of Erlang to use. Display an error and exit. Otherwise, use the version of Erlang specified in the erln8.config file and execv() that binary. execv() <em>replaces</em> the current process with the new process (see the man page for execv). So, a call to <code>erlc</code> will start up <code>erln8</code> via symlink, but the <code>erln8</code> process will be replaced during the execv() by the command located in the specified version of Erlang. </p>

<p>There is another layer of indirection as located in the ~/.erln8.d/otps/MY_OTP directory (with MY_OTP being a configured Erlang ID). This layer of indirection was added to take the legwork out of finding versioned binaries in the Erlang distribution. For example, the <code>to_erl</code> symlink points to <code>./dist/lib/erlang/erts-5.10.3/bin/to_erl</code>. erln8 only needs to know the command name to run it, without having to know the version # of erts.</p>

<pre><code>R16B02:slag:~/.erln8.d/otps/R16B02$ ls -latr
total 296
drwxr-xr-x   4 dparfitt  staff   136 Dec 23 10:43 dist
drwx------   3 dparfitt  staff   102 Dec 23 10:43 ..
lrwxr-xr-x   1 dparfitt  staff    71 Dec 23 10:43 xml_from_edoc.escript -&gt; ./dist/lib/erlang/lib/erl_docgen-0.3.4.1/priv/bin/xml_from_edoc.escript
lrwxr-xr-x   1 dparfitt  staff    39 Dec 23 10:43 typer -&gt; ./dist/lib/erlang/erts-5.10.3/bin/typer
lrwxr-xr-x   1 dparfitt  staff    40 Dec 23 10:43 to_erl -&gt; ./dist/lib/erlang/erts-5.10.3/bin/to_erl
lrwxr-xr-x   1 dparfitt  staff    60 Dec 23 10:43 start_webtool -&gt; ./dist/lib/erlang/lib/webtool-0.8.9.2/priv/bin/start_webtool
...
</code></pre>

<p>The <code>.dist</code> directory defined for each version of Erlang installed also allows erln8 to generate this list of symlinks for a <em>linked</em> version of Erlang (see above). Symlinks don't need to be placed in the linked directory (which could be anywhere in the filesystem).</p>

<h1>
<a id="contributing" class="anchor" href="#contributing" aria-hidden="true"><span class="octicon octicon-link"></span></a>Contributing</h1>

<p>Fork this repo, create a feature branch using something like this:</p>

<pre><code>git checkout -b branch_name
</code></pre>

<p>and submit a pull request. </p>

<p>Please send me an email (dparfitt at getchef dot com) and let me know if you want to work on any features.</p>

<p>Only friendly pull requests accepted.</p>

<h1>
<a id="license" class="anchor" href="#license" aria-hidden="true"><span class="octicon octicon-link"></span></a>License</h1>

<p><a href="http://www.apache.org/licenses/LICENSE-2.0.html">http://www.apache.org/licenses/LICENSE-2.0.html</a></p>

<hr>

<p>© 2015 Dave Parfitt</p>
      </section>
    </div>

    <!-- FOOTER  -->
    <div id="footer_wrap" class="outer">
      <footer class="inner">
        <p class="copyright">erln8 maintained by <a href="https://github.com/metadave">metadave</a></p>
        <p>Published with <a href="https://pages.github.com">GitHub Pages</a></p>
      </footer>
    </div>

    

  </body>
</html>
